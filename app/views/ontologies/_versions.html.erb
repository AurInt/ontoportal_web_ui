<script type="text/javascript">
  jQuery(document).ready(function(){
    jQuery(".click_versions_collapse").click(function(){
      var collapse = "#" + jQuery(this).parent().attr("id") + "_collapsible";
      var icon = "#" + jQuery(this).parent().attr("id") + "_icon";
      jQuery(icon).toggleClass("ui-icon-triangle-1-e");
      jQuery(icon).toggleClass("ui-icon-triangle-1-s");
      jQuery(collapse).toggle();
    });

    jQuery("#version_toggle").click(function(event){
      event.preventDefault();
      jQuery("#ontology_versions tr.hidden_select").toggleClass("hidden_ont");
    });

    jQuery("#version_toggle").toggle(function() {
      jQuery(this).text("less...");
    }, function() {
      jQuery(this).text("more...");
    });

  });
</script>

<div id="versions_content" class="click_versions_collapse" style="padding-top: 1em;">
  <h2 style="font-size: x-large;">Versions</h2>
  <table id="ontology_versions" class="zebra" cellpadding="0" cellspacing="0" width="60%">
    <thead>
        <tr>
            <th>
                Version
            </th>
            <th>
                Release Date
            </th>
            <th>
                Upload Date
            </th>
            <th>
                Downloads
            </th>
        </tr>
    </thead>
    <% @versions.each_with_index do |version, index| %>
      <% hidden_row_class = index >= 5 ? "hidden_ont hidden_select" : "" %>
      <tr <%= cycle("class='#{hidden_row_class}'", "class='alt #{hidden_row_class}'") %> class="<%=hidden_row_class%>">
        <td>
            <%=status_link(version)%>
        </td>
        <td>
            <%= version.dateReleased %>
        </td>
        <td>
            <%= version.dateCreated %>
        </td>
        <td>
            <% download_link = get_download_link(version) %>
            <% diff_link = get_diffs_link(@diffs, @versions, version, index) %>
            <% separator = (download_link.nil? || download_link.empty?) ? "" : " / "%>
            <%= download_link %> <%= separator + diff_link unless diff_link.nil? || diff_link.empty? %>
        </td>
      </tr>
    <%end%>

    <% if @versions.length >= 5 %>
      <tr>
        <td colspan="3" style="text-align: right;"><a href="" id="version_toggle">more...</a></td>
      </tr>
    <% end %>
  </table>
</div>
